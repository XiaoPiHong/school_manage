"use strict";(self["webpackChunkschool_manage_ts"]=self["webpackChunkschool_manage_ts"]||[]).push([[292],{7292:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"content-box"},[t("div",{staticClass:"login-box"},[t("Form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.formRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{prop:"name"}},[t("Input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name","string"===typeof t?t.trim():t)},expression:"loginForm.name"}})],1),t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{placeholder:"请输入密码",type:"password",clearable:""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("div",{staticClass:"operate-box"},[t("Button",{attrs:{type:"success"},on:{click:e.login}},[e._v("登陆")]),t("a",{attrs:{href:"javascript:void(0);"},on:{click:e.register}},[e._v("→注册")])],1)],1)],1)])},n=[],s=o(7327),a=(o(7658),o(9203)),i=o(2567),l=o(9566),c=function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&Object.defineProperty(t,o,a),a};let m=class extends a.w3{constructor(...e){super(...e),(0,s.Z)(this,"loginForm",new i.Z.LoginForm),(0,s.Z)(this,"formRules",{name:[{validator:this.validateName,trigger:"change"}],password:[{validator:this.validatePassword,trigger:"change"}]})}validateName(e,t,o){""===this.loginForm.name?o(new Error("请输入用户名")):this.loginForm.name.length<5||this.loginForm.name.length>10?o(new Error("用户名长度必须大于5且小于10")):o()}validatePassword(e,t,o){""===this.loginForm.password?o(new Error("请输入密码")):this.$pattern.password.test(this.loginForm.password)?this.loginForm.password.length<8||this.loginForm.password.length>20?o(new Error("请输入长度为8~20位的字母加数字组合密码")):o():o(new Error("请输入长度为8~20位的字母加数字组合密码"))}login(){this.$refs.loginForm.validate((e=>{e&&(0,l.x)({username:this.loginForm.name,password:this.loginForm.password}).then((e=>{window.localStorage.setItem("token",e.data.token),this.$cookie.set("manage",JSON.stringify(e.data)),this.$router.push({name:"Index"})})).catch((e=>{console.log(e)}))}))}register(){this.$router.push({name:"Register"})}};m=c([(0,a.wA)({name:"Login",components:{}})],m);var u=m,g=u,p=o(3736),d=(0,p.Z)(g,r,n,!1,null,"8df97950",null),h=d.exports},9566:function(e,t,o){o.d(t,{x:function(){return n},z:function(){return s}});var r=o(430);function n(e){return(0,r.Z)({url:"/api/login",method:"post",data:e})}function s(e){return(0,r.Z)({url:"/api/public/users/register",method:"post",data:e})}}}]);
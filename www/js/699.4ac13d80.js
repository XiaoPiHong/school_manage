"use strict";(self["webpackChunkschool_manage_ts"]=self["webpackChunkschool_manage_ts"]||[]).push([[699,923],{1923:function(t,e,s){s.r(e),s.d(e,{default:function(){return p}});var l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("Input",{attrs:{size:t.$attrs.size,placeholder:t.$attrs.placeholder,disabled:t.$attrs.disabled},on:{"on-change":t.myChange,"on-blur":t.myBlur,"on-focus":t.myFocus},model:{value:t.mV,callback:function(e){t.mV=e},expression:"mV"}})},a=[],o=s(7327),i=s(9203),r=function(t,e,s,l){var a,o=arguments.length,i=o<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,s,l);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(o<3?a(i):o>3?a(e,s,i):a(e,s))||i);return o>3&&i&&Object.defineProperty(e,s,i),i};let c=class extends i.w3{constructor(...t){super(...t),(0,o.Z)(this,"value",void 0),(0,o.Z)(this,"max",void 0),(0,o.Z)(this,"accurate",void 0),(0,o.Z)(this,"mV","")}emitChange(t){return t}emitBlur(t){return t}emitFocus(t){return t}watchMV(t){""===t?this.emitChange(t):this.emitChange(Number(t))}myChange(t){let e=t.target.value;this.$nextTick((()=>{isNaN(Number(t.data))&&"."!==t.data||e.split(".").length-1>1||"."===e?this.$set(this,"mV",""):Number(e<0)||Number(e>99999999999)||" "===t.data||isNaN(Number(e))?this.$set(this,"mV","0"):Number(e>this.max)?this.$set(this,"mV",String(this.max)):"."===e[0]&&"."!==e[1]&&e.length>1||"0"===e[0]&&"."!==e[1]&&e.length>1?this.$set(this,"mV",String(Number(e)).slice(0,2+this.accurate)):e.indexOf(".")>0&&e.length-(e.indexOf(".")+1)>this.accurate?this.$set(this,"mV",e.slice(0,e.indexOf(".")+this.accurate+1)):this.$set(this,"mV",e)}))}myBlur(t){this.emitBlur(t)}myFocus(t){this.emitFocus(t)}created(){this.mV=String(this.value)}};r([(0,i.Hn)("on-change"),(0,i.fI)()],c.prototype,"value",void 0),r([(0,i.fI)({type:Number,default:99999999999})],c.prototype,"max",void 0),r([(0,i.fI)({type:Number,default:0})],c.prototype,"accurate",void 0),r([(0,i.y1)("on-change")],c.prototype,"emitChange",null),r([(0,i.y1)("on-blur")],c.prototype,"emitBlur",null),r([(0,i.y1)("on-focus")],c.prototype,"emitFocus",null),r([(0,i.RL)("mV")],c.prototype,"watchMV",null),c=r([(0,i.wA)({name:"XphInput",inheritAttrs:!1,components:{}})],c);var n=c,u=n,h=s(3736),d=(0,h.Z)(u,l,a,!1,null,"e1e05f44",null),p=d.exports},2699:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("Row",{staticClass:"mt10 mb10"},[e("Col",{staticClass:"mt10",attrs:{span:24}},[e("Button",{attrs:{type:"primary"},on:{click:t.test}},[t._v("点击获取表格数据")])],1),e("Col",{staticClass:"mt10",attrs:{span:24}},[e("Table",{attrs:{columns:t.cols,data:t.data,height:400}})],1),e("Col",{staticClass:"mt10",attrs:{span:24}},[e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{flex:"1"}},[e("p",[t._v(" 1.iview2.x在Table组件中使用render函数渲染Input或Select或InputeNumber组件,每当改变表格数据时，都会引发整个表格渲染（就会引发输入时失焦问题） ")]),e("p",[t._v(" 2."),e("span",{staticClass:"f-color-red"},[t._v("解决上述问题的办法就是：")]),t._v("先更新params.row.xxx，再将tableData进行整行更新。这样就不会导致Table进行重新渲染。 ")]),e("img",{attrs:{src:s(9575),alt:""}})]),e("div",{staticStyle:{flex:"1"}},[e("p",[t._v(" 3."),e("span",{staticClass:"f-color-red"},[t._v("注意：")]),t._v("如果当用户需要对tableData进行监控，采用上面的方法会导致vue无法监控到tableData内数据的变化（实际上是发生了变化），这样我们不能通过常规的watch或者时computer对数据进行监控。"),e("span",{staticClass:"f-color-red"},[t._v("解决方法：")]),t._v("采用html的失去焦点事件，当Input组件失去焦点时，对某个数据进行更新，从而达到数据一致。 ")]),e("img",{attrs:{src:s(2855),alt:""}})])])]),e("Col",{attrs:{span:24}},[e("p",[t._v(" 4.iview4.x使用Table组件，改变表格数据时，不会发生整个表格重新渲染的问题，所以不会产生像2.x那样的问题 ")]),e("p",[t._v(" 5.以上问题可以观看文章："),e("a",{attrs:{href:"https://blog.csdn.net/weixin_38881817/article/details/85112887",target:"_blank"}},[t._v("点击跳转")])])])],1)},a=[],o=s(7327),i=s(9203),r=s(1923),c=function(t,e,s,l){var a,o=arguments.length,i=o<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,s,l);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(i=(o<3?a(i):o>3?a(e,s,i):a(e,s))||i);return o>3&&i&&Object.defineProperty(e,s,i),i};let n=class extends i.w3{constructor(...t){super(...t),(0,o.Z)(this,"data",[{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""},{id:1,cols2:"test",cols3:"",cols4:"",cols5:""}]),(0,o.Z)(this,"cols",[{title:"id",key:"id"},{title:"列2",key:"cols2",render:(t,e)=>t("Input",{props:{value:e.row.clos2,placeholder:"请输入内容"},on:{"on-change":t=>{e.row.clos2=t.target.value,this.data[e.row._index]=e.row}}})},{title:"列3",key:"cols3",render:(t,e)=>t("Input",{props:{value:e.row.cols3},on:{"on-change":t=>{this.validateNumber(t,this.data[e.row._index],"cols3",99,1)},input:t=>{this.changeInput(t,e.row._index)},"on-blur":()=>{""!==this.data[e.row._index].cols3&&this.$set(this.data[e.row._index],"cols3",parseFloat(this.data[e.row._index].cols3))}}})},{title:"列4",key:"cols4",render:(t,e)=>t("Select",{props:{placeholder:"请选择内容",filterable:!0,clearable:!0,value:e.row.cols4},on:{"on-change":t=>{this.changeSelect(t,e.row._index)}}},[this.selectDropList.map((e=>t("Option",{props:{value:e.Value}},e.Key)))])},{title:"列5",key:"cols5",render:(t,e)=>t(r["default"],{props:{value:e.row.cols5,accurate:2,max:9999.99},on:{change:t=>{e.row.cols5=t,this.data[e.row._index]=e.row}}})}]),(0,o.Z)(this,"selectDropList",[{Key:"测试1",Value:1},{Key:"测试2",Value:2},{Key:"测试3",Value:3}])}mounted(){}test(){console.log(this.data)}changeInput(t,e){this.data[e].cols3=t}changeSelect(t,e){this.data[e].cols4=t}validateNumber(t,e,s,l,a){let o=t.target.value;this.$nextTick((()=>{isNaN(Number(t.data))&&"."!==t.data||o.split(".").length-1>1||"."===o?this.$set(1==e?this:e,s,""):Number(o<0)||Number(o>99999999999999)||" "===t.data||isNaN(Number(o))?this.$set(1==e?this:e,s,0):Number(o>l)?this.$set(1==e?this:e,s,l):"."===o[0]&&"."!==o[1]&&o.length>1||"0"===o[0]&&"."!==o[1]&&o.length>1?this.$set(1==e?this:e,s,String(Number(o)).slice(0,2+a)):o.indexOf(".")>0&&o.length-(o.indexOf(".")+1)>a?this.$set(1==e?this:e,s,o.slice(0,o.indexOf(".")+a+1)):this.$set(1==e?this:e,s,o)}))}};n=c([(0,i.wA)({name:"RenderCom",components:{}})],n);var u=n,h=u,d=s(3736),p=(0,d.Z)(h,l,a,!1,null,"0ba853bd",null),m=p.exports},9575:function(t,e,s){t.exports=s.p+"img/table_render_1.cf270e39.png"},2855:function(t,e,s){t.exports=s.p+"img/table_render_2.72eff91c.png"}}]);
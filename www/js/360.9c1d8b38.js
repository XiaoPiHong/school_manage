"use strict";(self["webpackChunkschool_manage_ts"]=self["webpackChunkschool_manage_ts"]||[]).push([[360,127],{6360:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Row",[t("Col",{staticClass:"mt10",attrs:{span:"24"}},[t("Input",{staticStyle:{width:"20%"},attrs:{placeholder:"请输入菜单元素名称"},model:{value:e.searchForm.query,callback:function(t){e.$set(e.searchForm,"query",t)},expression:"searchForm.query"}}),t("Button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("搜索")]),t("Button",{attrs:{type:"warning"},on:{click:e.resetList}},[e._v("重置")]),t("Button",{attrs:{type:"success"},on:{click:e.addMenu}},[e._v("新增")])],1),t("Col",{staticClass:"mt10",attrs:{span:"24"}},[t("Table",{attrs:{columns:e.tableHead,data:e.list,stripe:"",height:e.tableHeight}})],1),t("Col",{staticClass:"mt10",attrs:{span:"24"}},[t("Page",{attrs:{current:e.pager.pageIndex,total:e.pager.totalItems,"page-size":e.pager.pageSize,"page-size-opts":e.pager.pageOpt,"show-total":"","show-sizer":"","show-elevator":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1),t("MenuModal",{attrs:{show:e.menuModal.show,type:e.menuModal.type,data:e.menuModal.data},on:{"update:show":function(t){return e.$set(e.menuModal,"show",t)},close:function(t){return e.getList()}}})],1)},a=[],s=n(7327),r=n(9203),i=n(2567),l=n(3836),u=n(7621),m=n(3822),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Modal",{attrs:{title:"add"===e.type?"添加菜单":"编辑菜单","mask-closable":!1,width:500},on:{"on-cancel":e.handleClose},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[t("Form",{ref:"menuComFormRef",attrs:{model:e.menuComForm,rules:e.menuComFormRules,"label-position":"right","label-width":130},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{prop:"menu_el_id",label:"菜单元素ID："}},[t("Input",{attrs:{placeholder:"请输入菜单元素ID",clearable:""},model:{value:e.menuComForm.menu_el_id,callback:function(t){e.$set(e.menuComForm,"menu_el_id",t)},expression:"menuComForm.menu_el_id"}})],1),t("FormItem",{attrs:{prop:"menu_el_name",label:"菜单元素名称："}},[t("Input",{attrs:{placeholder:"请输入菜单元素名称",clearable:""},model:{value:e.menuComForm.menu_el_name,callback:function(t){e.$set(e.menuComForm,"menu_el_name",t)},expression:"menuComForm.menu_el_name"}})],1),t("FormItem",{attrs:{prop:"menu_parent_id",label:"菜单父级ID："}},[t("InputNumber",{staticStyle:{width:"100%"},attrs:{max:1e10,min:0},model:{value:e.menuComForm.menu_parent_id,callback:function(t){e.$set(e.menuComForm,"menu_parent_id",t)},expression:"menuComForm.menu_parent_id"}})],1)],1),t("footer",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),t("Button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)},h=[],p=function(e,t,n,o){var a,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(r=(s<3?a(r):s>3?a(t,n,r):a(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r};let d=class extends r.w3{constructor(...e){super(...e),(0,s.Z)(this,"type",void 0),(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"modalShow",void 0),(0,s.Z)(this,"menuComForm",new l.Z.MenuComForm),(0,s.Z)(this,"menuComFormRules",{menu_el_id:[{required:!0,message:"请输入菜单元素ID",trigger:"blur"}],menu_el_name:[{required:!0,message:"请输入菜单元素名称",trigger:"blur"}],menu_parent_id:[{required:!0,type:"number",message:"请输入菜单父级ID",trigger:"blur"}]})}emitClose(){}watchShow(e){e&&"edit"===this.type&&(this.menuComForm={...this.data})}handleSubmit(){this.$refs.menuComFormRef.validate((e=>{if(e){const e=JSON.parse(JSON.stringify(this.menuComForm));switch(this.type){case"add":(0,u.Wh)(e).then((e=>{this.$Message.success("操作成功！"),this.handleClose(!0)})).catch((e=>{console.log(e)}));break;case"edit":(0,u.aO)(this.data.menu_id,e).then((e=>{this.$Message.success("操作成功！"),this.handleClose(!0)})).catch((e=>{console.log(e)}));break}}}))}handleClose(e){this.menuComForm=new l.Z.MenuComForm,this.$refs.menuComFormRef.resetFields(),this.modalShow=!1,e&&this.emitClose()}};p([(0,r.fI)()],d.prototype,"type",void 0),p([(0,r.fI)()],d.prototype,"data",void 0),p([(0,r.vZ)("show",{type:Boolean})],d.prototype,"modalShow",void 0),p([(0,r.y1)("close")],d.prototype,"emitClose",null),p([(0,r.RL)("show")],d.prototype,"watchShow",null),d=p([(0,r.wA)({name:"MenuModal",components:{}})],d);var g=d,f=g,_=n(3736),y=(0,_.Z)(f,c,h,!1,null,"055de745",null),w=y.exports,C=function(e,t,n,o){var a,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(r=(s<3?a(r):s>3?a(t,n,r):a(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r};const M={ADD:"add",EDIT:"edit"};let v=class extends r.w3{constructor(...e){super(...e),(0,s.Z)(this,"searchForm",new l.Z.MenuComSearchForm),(0,s.Z)(this,"list",[]),(0,s.Z)(this,"tableHead",[{title:"菜单元素ID",key:"menu_el_id",align:"center"},{title:"菜单元素名称",key:"menu_el_name",align:"center"},{title:"菜单父级ID",key:"menu_parent_id",align:"center"},{title:"创建时间",key:"menu_time",align:"center"},{title:"操作",width:150,align:"center",render:(e,t)=>e("div",[e("Button",{props:{type:"primary",size:"small"},on:{click:()=>{this.editMenu(t.row)}}},"编辑"),e("Button",{style:{marginLeft:"10px"},props:{type:"error",size:"small"},on:{click:()=>{this.deleteMenu(t.row)}}},"删除")])}]),(0,s.Z)(this,"pager",new i.Z.Pager),(0,s.Z)(this,"menuModal",{show:!1,type:M.ADD,data:{}})}get tableHeight(){return this.$ui.winHeight-60-10-40-40-10-45}mounted(){this.resetList()}getList(){(0,u.Af)({...this.searchForm,pagenum:this.pager.pageIndex,pagesize:this.pager.pageSize}).then((e=>{this.pager.totalItems=e.data.total,this.list=e.data.list})).catch((e=>{console.log(e)}))}searchList(){this.pager.pageIndex=1,this.getList()}resetList(){this.$set(this,"pager",new i.Z.Pager),this.$set(this,"searchForm",new l.Z.MenuComSearchForm),this.getList()}changePageSize(e){this.pager.pageSize=e,this.getList()}changePage(e){this.pager.pageIndex=e,this.getList()}editMenu(e){this.menuModal.type=M.EDIT,this.menuModal.data=e,this.menuModal.show=!0}addMenu(){this.menuModal.type=M.ADD,this.menuModal.show=!0}deleteMenu(e){(0,u.RD)(e.menu_id).then((e=>{this.$Message.success("删除成功！"),this.getList()})).catch((e=>{console.log(e)}))}};v=C([(0,r.wA)({name:"MenuCom",components:{MenuModal:w},computed:{...(0,m.rn)({$ui:e=>e.systemModule.ui})}})],v);var F=v,b=F,Z=(0,_.Z)(b,o,a,!1,null,"71f728e0",null),I=Z.exports},7621:function(e,t,n){n.d(t,{Af:function(){return r},RD:function(){return i},Wh:function(){return s},aO:function(){return l},lj:function(){return a}});var o=n(430);function a(){return(0,o.Z)({url:"/api/private/menu/getMenus",method:"get"})}function s(e){return(0,o.Z)({url:"/api/private/menu/postMenu",method:"post",data:e})}function r(e){return(0,o.Z)({url:"/api/private/menu/getMenuList",method:"get",params:e})}function i(e){return(0,o.Z)({url:`/api/private/menu/deleteMenu/${e}`,method:"delete"})}function l(e,t){return(0,o.Z)({url:`/api/private/menu/changeMenu/${e}`,method:"put",data:t})}},3836:function(e,t,n){var o,a=n(7327);(function(e){class t{constructor(){(0,a.Z)(this,"query","")}}e.UserComSearchForm=t})(o||(o={})),function(e){class t{constructor(){(0,a.Z)(this,"query","")}}e.MenuComSearchForm=t;class n{constructor(){(0,a.Z)(this,"menu_el_id",""),(0,a.Z)(this,"menu_el_name",""),(0,a.Z)(this,"menu_parent_id",0)}}e.MenuComForm=n}(o||(o={})),t["Z"]=o}}]);
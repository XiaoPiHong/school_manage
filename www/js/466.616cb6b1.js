"use strict";(self["webpackChunkschool_manage_ts"]=self["webpackChunkschool_manage_ts"]||[]).push([[466],{6784:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Row",{staticClass:"home"},[t("Col",{attrs:{span:24}},[t("Tabs",{ref:"tabsRef",attrs:{type:"card",animated:!1,closable:"",name:"homeTabs",value:e.currentPane,closeable:""},on:{"on-click":e.changeRoute,"on-tab-remove":e.handleTabRemove}},[t("TabPane",{attrs:{label:"首页",name:"Index",closable:!1,tab:"homeTabs"}}),e._l(e.showPageList,(function(e){return t("TabPane",{key:e.elementId,attrs:{label:e.resourceName,name:e.elementId,tab:"homeTabs"}})}))],2),e.pageShow[`${e.currentPane}`]?t("keep-alive",[t(e.currentPane,{tag:"component"})],1):e._e()],1)],1)},r=[],a=n(7327),i=(n(7658),n(9203)),h=n(7621),s=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var h=e.length-1;h>=0;h--)(r=e[h])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};let d=class extends i.w3{constructor(...e){super(...e),(0,a.Z)(this,"transformTree",((e,t,n)=>{const{idKey:o,parentIdKey:r,formatNode:a=(e=>e)}=n,i=(e,t)=>{const n=[];for(let h=0,s=t.length;h<s;h++){const s=t[h],d=s[r],u=s[o];if(d===e){const e={id:u,data:s,children:i(u,t)};n.push(a(e))}}return n};return i(e,t)})),(0,a.Z)(this,"currentPane","Index"),(0,a.Z)(this,"pageList",[]),(0,a.Z)(this,"pageShow",{Index:!0}),(0,a.Z)(this,"navTree",[])}get showPageList(){return this.pageList.filter((e=>this.pageShow[e.elementId]))}watchNavTree(e){for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];for(let e=0;e<t.childNodes.length;e++){const n=t.childNodes[e];this.pageList.push(n),this.$set(this.pageShow,n.elementId,!1)}}}this.handleShowCurrent()}watchRoute(e,t){this.handleShowCurrent()}created(){(0,h.lj)().then((e=>{const{data:t}=e;this.navTree=this.transformTree(0,t,{parentIdKey:"menu_parent_id",idKey:"menu_id",formatNode({id:e,children:t,data:n}){return{elementId:n.menu_el_id,resourceName:n.menu_el_name,childNodes:t}}}),this.$store.commit("initNavTree",{navTree:this.navTree})})).catch((e=>{console.log(e)}))}handleShowCurrent(){let e=this.$route;this.openTabPane(e.name)}openTabPane(e){this.pageShow[e]=!0,this.currentPane=e}changeRoute(e){if(e==this.$route.name){if("Index"===e)return;return this.pageShow[e]=!1,void this.$nextTick((()=>{this.pageShow[e]=!0}))}this.currentPane=e,this.$router.push({name:e})}handleTabRemove(e){this.pageShow[e]=!1,e===this.$route.name&&this.$nextTick((()=>{this.changeRoute(this.$refs.tabsRef.activeKey)}))}};s([(0,i.RL)("navTree")],d.prototype,"watchNavTree",null),s([(0,i.RL)("$route")],d.prototype,"watchRoute",null),d=s([(0,i.wA)({name:"Home",components:{Index:()=>Promise.all([n.e(81),n.e(696)]).then(n.bind(n,6696)),ValidateForm:()=>n.e(971).then(n.bind(n,5971)),SelectCom:()=>n.e(784).then(n.bind(n,4784)),InputCom:()=>n.e(321).then(n.bind(n,8321)),InputNumberCom:()=>n.e(463).then(n.bind(n,463)),JoditCom:()=>Promise.all([n.e(572),n.e(542)]).then(n.bind(n,8542)),HistogramCom:()=>Promise.all([n.e(81),n.e(76)]).then(n.bind(n,5076)),AxiosCom:()=>n.e(936).then(n.bind(n,8936)),AsyncCom:()=>n.e(889).then(n.bind(n,9749)),RenderCom:()=>n.e(699).then(n.bind(n,2699)),JudgmentTypeCom:()=>n.e(916).then(n.bind(n,2916)),RouterPassCom:()=>n.e(343).then(n.bind(n,8343)),VuexCom:()=>n.e(247).then(n.bind(n,1247)),VmodelCom:()=>n.e(299).then(n.bind(n,1299)),DownloadFileCom:()=>n.e(733).then(n.bind(n,8733)),FileReaderCom:()=>n.e(779).then(n.bind(n,5779)),FileCom:()=>n.e(770).then(n.bind(n,9770)),UploadFileCom:()=>n.e(749).then(n.bind(n,749)),CanvasCom:()=>n.e(562).then(n.bind(n,6562)),MVVMCom:()=>n.e(308).then(n.bind(n,9308)),DelegateCom:()=>n.e(52).then(n.bind(n,1052)),SourceMapCom:()=>n.e(693).then(n.bind(n,3693)),DebounceAndThrottleCom:()=>n.e(551).then(n.bind(n,7551)),CustomInstructionCom:()=>n.e(452).then(n.bind(n,5452)),SlotCom:()=>Promise.all([n.e(572),n.e(803)]).then(n.bind(n,7803)),KeepAliveCom:()=>n.e(872).then(n.bind(n,1872)),FlexCom:()=>n.e(432).then(n.bind(n,5432)),KeyCom:()=>n.e(924).then(n.bind(n,4924)),FunctionCreateCom:()=>n.e(85).then(n.bind(n,1085)),CacheCom:()=>n.e(619).then(n.bind(n,4619)),GridCom:()=>n.e(851).then(n.bind(n,851)),UserCom:()=>n.e(276).then(n.bind(n,6276)),MenuCom:()=>n.e(127).then(n.bind(n,6360)),DeepCom:()=>n.e(941).then(n.bind(n,6941))}})],d);var u=d,l=u,m=n(3736),c=(0,m.Z)(l,o,r,!1,null,"04d860d4",null),b=c.exports},7621:function(e,t,n){n.d(t,{Af:function(){return i},RD:function(){return h},Wh:function(){return a},aO:function(){return s},lj:function(){return r}});var o=n(430);function r(){return(0,o.Z)({url:"/api/private/menu/getMenus",method:"get"})}function a(e){return(0,o.Z)({url:"/api/private/menu/postMenu",method:"post",data:e})}function i(e){return(0,o.Z)({url:"/api/private/menu/getMenuList",method:"get",params:e})}function h(e){return(0,o.Z)({url:`/api/private/menu/deleteMenu/${e}`,method:"delete"})}function s(e,t){return(0,o.Z)({url:`/api/private/menu/changeMenu/${e}`,method:"put",data:t})}}}]);
"use strict";(self["webpackChunkschool_manage_ts"]=self["webpackChunkschool_manage_ts"]||[]).push([[971],{5971:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Row",[t("Col",{attrs:{span:"4"}},[t("h2",[e._v("需求：值一改变触发表单验证")]),t("p",[e._v("注意：")]),t("p",[e._v(" 1.校验规则formRules中的校验目标一定要有对应的prop与其匹配，不然会报错 ")]),t("p",[e._v(" 2.表单的resetFields方法可以清空表单的内容还有之前的校验信息（下拉框需要特别对待） ")]),t("p",[e._v("3.表单的validate方法是验证整个表单，验证部分表单用validateField方法")])]),t("Col",{attrs:{span:"20"}},[t("Form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{prop:"startTime"}},[t("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",confirm:"",placeholder:"开始时间"},on:{"on-change":e.changeTime},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),t("FormItem",{attrs:{prop:"endTime"}},[t("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",confirm:"",placeholder:"结束时间"},on:{"on-change":e.changeTime},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),t("Button",{attrs:{type:"warning"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},s=[],a=r(7327),n=r(9203),i=r(1505),m=function(e,t,r,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(n=(a<3?s(n):a>3?s(t,r,n):s(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n};let l=class extends n.w3{constructor(...e){super(...e),(0,a.Z)(this,"form",new i.Z.ValidateForm),(0,a.Z)(this,"formRules",{startTime:[{validator:this.validateTime,trigger:"change"}],endTime:[{validator:this.validateTime,trigger:"change"}]})}resetForm(){this.$refs.formRef.resetFields()}validateTime(e,t,r){let o=+new Date(this.form.startTime),s=+new Date(this.form.endTime),a=+new Date;o>s&&r(new Error("开始时间不能晚于结束时间")),o>a&&r(new Error("开始时间不能晚于当前时间")),(o&&!s||s&&!o)&&r(new Error("请选择开始时间和结束时间")),r()}changeTime(){this.$refs.formRef.validate()}};l=m([(0,n.wA)({name:"ValidateForm",components:{}})],l);var c=l,f=c,u=r(3736),d=(0,u.Z)(f,o,s,!1,null,null,null),p=d.exports},1505:function(e,t,r){var o,s=r(7327);(function(e){class t{constructor(){(0,s.Z)(this,"startTime",""),(0,s.Z)(this,"endTime","")}}e.ValidateForm=t;class r{constructor(){(0,s.Z)(this,"city",0),(0,s.Z)(this,"text","")}}e.SelectComForm=r;class o{constructor(){(0,s.Z)(this,"num",0)}}e.InputComForm=o;class a{constructor(){(0,s.Z)(this,"num",null)}}e.InputNumberForm=a})(o||(o={})),t["Z"]=o}}]);